# 렌더링 관련

# Lighthouse

## Lighthouse 사용하기

chrome의 개발자도구에서 사용이 가능함. 

### 각종 지표는 뭣인가?

Lighthouse 성적표를 받으면 수많은 숫자와 영어가 나오는데, 그중에서 **실제 사용자 경험(UX)과 직결되는 5가지 핵심 지표**만 기억하시면 됩니다.

이를 구글에서는 **Core Web Vitals (핵심 웹 지표)**라고 부르기도 합니다.

---

### 1. LCP (Largest Contentful Paint) - "실질적인 로딩 속도"

- **의미:** 페이지에서 가장 큰 이미지나 텍스트 블록이 화면에 나타나는 시점입니다.
- **왜 중요한가:** 사용자는 화면에 큰 덩어리가 보여야 "아, 이제 사이트가 떴구나"라고 느낍니다.
- **목표 점수:** **2.5초 이내** (초록색)
- **CSR 보완 전략:** 스켈레톤 UI를 보여주거나, 메인 배너 이미지 등을 미리 로드(`priority`)하여 시간을 단축합니다.

### 2. TBT (Total Blocking Time) - "상호작용 방해 시간"

- **의미:** 메인 스레드가 자바스크립트 실행으로 인해 꽉 막혀서, 사용자가 클릭해도 반응하지 못하는 총 시간입니다.
- **CSR에서의 상황:** 브라우저가 거대한 JS 파일을 다운로드하고, 이를 해석(Parse)하고 실행(Execute)하기 시작합니다. 이때 브라우저의 **메인 스레드**는 이 거대한 JS 덩어리를 처리하느라 완전히 점유됩니다.
- **TBT가 치솟는 의미:** 메인 스레드가 JS를 실행하느라 바빠서 사용자가 버튼을 클릭하거나 화면을 스크롤하려 해도 브라우저가 **"잠시만요, 저 지금 React 컴포넌트들 그리느라 바빠요!"**라며 응답을 못 하는 시간이 길어진다는 뜻입니다.
- **목표 점수:** **200ms 이내**
- **보완 전략:** 코드 분할(Code Splitting), 불필요한 라이브러리 제거.

### 3. CLS (Cumulative Layout Shift) - "시각적 안정성"

- **의미:** 로딩 중에 화면 구성 요소가 덜컥거리며 위치가 바뀌는 정도를 측정합니다.
- **왜 중요한가:** 버튼을 누르려는데 갑자기 위에 이미지가 로드되면서 버튼이 쑥 내려가서 엉뚱한 곳을 클릭하는 짜증 나는 경험을 방지합니다.
- **목표 점수:** **0.1 이하**
- **보완 전략:** 이미지나 광고 영역에 미리 높이/너비 값을 고정해 둡니다.

### 4. FCP (First Contentful Paint) - "첫 반응"

- **의미:** 브라우저가 흰 화면을 벗어나 무엇인가(로고, 배경색 등)를 처음으로 그리는 시점입니다.
- **왜 중요한가:** 사용자가 "서버가 죽었나?"라고 의심하기 전에 안심시키는 지표입니다.
- **보완 전략:** 서버에서 아주 기초적인 CSS와 HTML을 빠르게 응답하게 합니다.

### 5. Speed Index - "시각적 로드 속도"

- **의미:** 페이지 콘텐츠가 얼마나 빨리 시각적으로 채워지는지 측정하는 종합 지표입니다.
- **왜 중요한가:** 전체적인 로딩 흐름이 얼마나 매끄러운지 보여줍니다.

---

### 💡 폐쇄망 운영툴에서 특히 집중해야 할 순서

운영툴은 일반적인 쇼핑몰과는 성격이 다르므로 아래 순서대로 체크해 보세요.

1. **TBT (최우선):** 운영툴은 기능이 많아 JS가 무겁기 마련입니다. 사용자가 클릭했을 때 묵묵부답이면 안 되므로 TBT를 가장 먼저 줄여야 합니다.
2. **LCP:** 데이터가 많은 대시보드라면, 데이터 로딩 중임을 알리는 UI를 통해 LCP 경험을 개선해야 합니다.
3. **CLS:** 표(Table)나 그래프가 로드되면서 레이아웃이 깨지면 업무 효율이 떨어지므로 이를 잘 잡아줘야 합니다.

---

**면접 팁:** "Lighthouse 점수 중 특히 **TBT**를 눈여겨보았습니다. CSR 방식의 특성상 초기 자바스크립트 로딩 시 메인 스레드 점유 시간이 길어질 수 있는데, 이를 **코드 분할과 공통 모듈 최적화**를 통해 000ms에서 000ms로 단축하여 사용자 상호작용성을 개선했습니다."라고 말씀하시면 아주 훌륭합니다.

지금 Lighthouse를 돌려보셨을 때, 혹시 **빨간색**으로 뜨는 지표가 있나요? 그 지표의 이름을 알려주시면 해결 방법을 바로 찾아드릴게요!

## 기타 lighthouse 지표

No `Content-Security-Policy` header with Trusted Types directive found

## lighthouse의 테스트 환경?

Lighthouse는 기본적으로 **느린 네트워크 + 느린 CPU 스로틀링**을 적용합니다:

| 설정 | 값 |
| --- | --- |
| Network | Slow 4G (150ms RTT, 1.6Mbps) |
| CPU | 4x slowdown |

[CSR](%EB%A0%8C%EB%8D%94%EB%A7%81%20%EA%B4%80%EB%A0%A8/CSR%202edcee38e89a801e9f93e37887a436e7.md)

[VARCO Translation API 페이지 렌더링 개선 ](%EB%A0%8C%EB%8D%94%EB%A7%81%20%EA%B4%80%EB%A0%A8/VARCO%20Translation%20API%20%ED%8E%98%EC%9D%B4%EC%A7%80%20%EB%A0%8C%EB%8D%94%EB%A7%81%20%EA%B0%9C%EC%84%A0%202edcee38e89a80b89f7ec37a54257ce0.md)

[최적화 ](%EB%A0%8C%EB%8D%94%EB%A7%81%20%EA%B4%80%EB%A0%A8/%EC%B5%9C%EC%A0%81%ED%99%94%202edcee38e89a806b9693c1edd96f38f2.md)